window.onload=function(){
var _1=new StartMenu();
_1.init();
};
(function(){
"use strict";
var _2=function(){
this.init=function(){
_3();
};
var _3=function(){
var _4=document.querySelector("#selfPlayerModeButton");
document.getElementById("selfPlayerModeButton").innerHTML=_("numbers_menu_1player_mode");
_4.addEventListener("click",_5,false);
document.getElementById("twoPlayerModeButton").innerHTML=_("numbers_menu_2player_mode");
document.getElementById("rankingButton").innerHTML=_("numbers_menu_ranking_mode");
};
var _5=function(){
_6("selfMode");
var _7=new Game1Player();
_7.init();
};
var _6=function(_8){
if(_8==="selfMode"){
document.getElementsByClassName("startMenu")[0].style.display="none";
document.getElementsByClassName("buttonGroup")[0].style.display="block";
document.getElementsByClassName("historyTitle")[0].style.display="block";
document.getElementsByClassName("timeCounter")[0].style.display="block";
}
};
};
window.StartMenu=_2;
}());
(function(){
"use strict";
var _9=function(){
this.init=function(){
document.getElementById("historyTitle").innerHTML=_("numbers_history_title");
_9.target_number=_a();
_b();
_c();
_d();
_9.timer=setInterval(_e,10);
};
var _e=function(){
var _f=new Date();
var _10=_f.getHours();
var _11=_f.getMinutes();
var _12=_f.getSeconds();
var _13=Math.floor(_f.getMilliseconds()/10);
var _14=_10*60*60*100+_11*60*100+_12*100+_13;
var _15=_14-_9.startTime;
var h=Math.floor(_15/(60*60*100));
_15=_15-(h*60*60*100);
var m=Math.floor(_15/(60*100));
_15=_15-(m*60*100);
var s=Math.floor(_15/100);
var t=_15%100;
var hs=(h<10)?"0"+String(h):String(h);
var ms=(m<10)?"0"+String(m):String(m);
var ss=(s<10)?"0"+String(s):String(s);
var ts=(t<10)?"0"+String(t):String(t);
document.getElementsByClassName("timeCounter")[0].innerHTML=hs+":"+ms+":"+ss+"'"+ts;
};
var _d=function(){
if(_9.onStart){
var _1e=new Date();
var _1f=_1e.getHours();
var _20=_1e.getMinutes();
var _21=_1e.getSeconds();
var _22=Math.floor(_1e.getMilliseconds()/10);
_9.startTime=_1f*60*60*100+_20*60*100+_21*100+_22;
_9.onStart=false;
}else{
clearInterval(_9.timer);
}
};
var _b=function(){
var _23=document.querySelector("#guessNum");
for(var i=0;i<_9.prototype.NUMBER_DIGITS;i++){
var _25=document.createElement("button");
var img=document.createElement("img");
img.setAttribute("src","img/0.png");
img.setAttribute("value","0");
_25.setAttribute("class","numSelectBox");
_25.setAttribute("id","rank_"+(i+1));
_25.addEventListener("click",function(ev){
var _28=ev.currentTarget.id;
_29(_28);
},false);
_25.appendChild(img);
_23.appendChild(_25);
}
};
var _29=function(_2a){
document.getElementById("overlay").style.display="block";
var _2b=document.querySelector("#overlay");
var div=document.createElement("div");
div.setAttribute("class","selectNumMenuBox");
while(_2b.firstChild){
_2b.removeChild(_2b.firstChild);
}
for(var i=1;i<=10;i++){
if(i%3===1){
var p=document.createElement("p");
p.setAttribute("class","selectNumMenu");
}
var _2f=document.createElement("button");
var img=document.createElement("img");
var num=(i===10)?0:i;
img.setAttribute("src","img/"+num+".png");
img.setAttribute("value",num);
_2f.setAttribute("class","numSelectBox");
_2f.setAttribute("id","button_"+num);
_2f.addEventListener("click",function(ev){
var _33=ev.currentTarget.id.slice(-1);
_34(_33,_2a);
},false);
_2f.appendChild(img);
p.appendChild(_2f);
if(i%3){
div.appendChild(p);
}
}
_2b.appendChild(div);
};
var _34=function(num,_36){
var _37=document.querySelector("#"+_36);
while(_37.firstChild){
_37.removeChild(_37.firstChild);
}
var img=document.createElement("img");
img.setAttribute("src","img/"+num+".png");
img.setAttribute("value",num);
_37.appendChild(img);
};
var _c=function(){
var _39=document.querySelector("#guessButton");
document.getElementById("guessButton").innerHTML=_("numbers_guess_button_title");
_39.addEventListener("click",_3a,false);
var _3b=document.querySelector("#answerButton");
document.getElementById("answerButton").innerHTML=_("numbers_answer_button_title");
_3b.addEventListener("click",_3c,false);
};
var _a=function(){
var _3d="";
var _3e;
for(;_3d.length<_9.prototype.NUMBER_DIGITS;){
_3e=String(Math.floor(Math.random()*10));
if(_3e.match(/^[0-9]$/)){
if(_3d===""){
_3d=_3e;
}else{
var _3f=_3d.split("");
var _40=false;
for(var i=0;i<_3f.length;i++){
if(_3f[i]===_3e){
_40=true;
}
}
if(_40){
continue;
}else{
_3d+=_3e;
}
}
}
}
return _3d;
};
var _42=function(_43,_44){
var _45=_43.split("");
var _46=_44.split("");
var _47={"isResult":false,"HitNum":0,"BlowNum":0};
for(var i=0;i<_9.prototype.NUMBER_DIGITS;i++){
for(var j=0;j<_9.prototype.NUMBER_DIGITS;j++){
if(_46[i]===_45[j]){
if(i===j){
_47["HitNum"]+=1;
}else{
_47["BlowNum"]+=1;
}
break;
}
}
}
if(_47["HitNum"]===_9.prototype.NUMBER_DIGITS){
_47["isResult"]=true;
}else{
_47["isResult"]=false;
}
return _47;
};
var _3a=function(){
var _4a="";
var _4b=document.getElementById("guessNum");
for(var i=0;i<_9.prototype.NUMBER_DIGITS;i++){
if(_4a===""){
_4a=_4b.children[i].children[0].getAttribute("value");
}else{
var _4d=_4a.split("");
var _4e=false;
for(var j=0;j<_4d.length;j++){
if(_4d[j]===_4b.children[i].children[0].getAttribute("value")){
_4e=true;
}
}
if(_4e){
alert(_("numbers_digits_error"));
return;
}else{
_4a+=_4b.children[i].children[0].getAttribute("value");
}
}
}
var _50=_42(_9.target_number,_4a);
_9.guessTimes+=1;
if(_50["isResult"]){
_d();
alert(_("numbers_guess_successful"));
}else{
var _51=new Label();
var _52=[_9.guessTimes,_4a,_50["HitNum"],_50["BlowNum"]];
document.getElementById("history").innerHTML+=_51.fillBlank(_("numbers_guess_result_history"),_52)+"<br>";
}
};
var _3c=function(){
var end=confirm(_("numbers_answer_disp_confirm"));
if(end===true){
_d();
var _54=new Label();
alert(_54.fillBlank(_("numbers_answer_display"),[_9.target_number]));
window.location.href=window.location.href;
}
};
};
_9.prototype.NUMBER_DIGITS=4;
_9.target_number;
_9.guessTimes=0;
_9.onStart=true;
_9.startTime;
_9.timer;
window.Game1Player=_9;
}());

